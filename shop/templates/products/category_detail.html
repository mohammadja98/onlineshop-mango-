{% extends "_base.html" %}
{% load i18n %}
{% load static %}
{% comment %} {% load humanize %} {% endcomment %}

{% block page_title %}{{ category.name }} | Mango{% endblock %}

{% block content %}

<!-- ğŸŸ¢ Top Header (Breadcrumb) -->
<div class="bg-gradient-to-r from-yellow-100 via-yellow-50 to-green-100 py-10 mb-10 border-b">
  <div class="container mx-auto text-right px-4">
    <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
      {{ category.name }}
    </h1>
    <p class="text-gray-600 text-sm">
      {% blocktrans %}Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ Ù…Ø±ÙˆØ± Ú©Ù†ÛŒØ¯{% endblocktrans %}
    </p>
  </div>
</div>

<!-- ğŸŸ¡ Products Grid -->
<div class="container mx-auto px-4">
  {% if products %}
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
      {% for product in products %}
        <div class="bg-white rounded-2xl shadow hover:shadow-xl overflow-hidden transition transform hover:-translate-y-1">
          
          <!-- ØªØµÙˆÛŒØ± Ù…Ø­ØµÙˆÙ„ -->
          <a href="{{ product.get_absolute_url }}" class="block relative">
            {% if product.image %}
              <img src="{{ product.image.url }}" alt="{{ product.name }}"
                   class="w-full h-48 object-contain p-4 bg-white">
            {% else %}
              <div class="w-full h-48 flex items-center justify-center bg-yellow-50 text-yellow-600 font-bold text-2xl">
                {{ product.name|first }}
              </div>
            {% endif %}
            {% if product.available %}
              <span class="absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-lg">
                {% trans "Ù…ÙˆØ¬ÙˆØ¯" %}
              </span>
            {% else %}
              <span class="absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded-lg">
                {% trans "Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯" %}
              </span>
            {% endif %}
          </a>

          <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„ -->
          <div class="p-4 text-right">
            <h3 class="font-semibold text-gray-800 mb-2 truncate">
              <a href="{{ product.get_absolute_url }}" class="hover:text-green-600">
                {{ product.name }}
              </a>
            </h3>
            <p class="text-yellow-700 font-bold mb-3">
              {{ product.price }} {% trans "ØªÙˆÙ…Ø§Ù†" %}
              {% comment %} {{ product.price|intcomma }} {% trans "ØªÙˆÙ…Ø§Ù†" %} {% endcomment %}

            </p>

            <!-- Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ -->
            <form method="post" action="{% url 'cart:cart_add' product.id %}">
              {% csrf_token %}
              <input type="hidden" name="quantity" value="1">
              <button type="submit"
                      class="w-full bg-gradient-to-r from-yellow-400 to-yellow-600 text-white py-2 rounded-lg font-medium hover:from-yellow-500 hover:to-yellow-700 transition"
                      {% if not product.available %}disabled{% endif %}>
                {% trans "Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯" %}
              </button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center py-20">
      <h3 class="text-gray-500 text-lg">{% trans "Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯." %}</h3>
    </div>
  {% endif %}
</div>

{% endblock %}
